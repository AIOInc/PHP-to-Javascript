PHP-to-Javascript
=================

A tool for converting simple PHP objects to Javascript code, so that code for manipulating objects can be used both server-side and client-side.


How to use
==========

Examples
--------

cd tests
php examples.php

This will convert the PHP files in the tests directory and for each write a javascript file equivalent.


Programmatically
----------------

* Install Composer from http://getcomposer.org/

* Add the "base-reality/php-to-javascript": ">=0.0.3" to your project's composer.json file:

    "require":{
		"base-reality/php-to-javascript": ">=0.0.9"
	}

  Or the latest version.

* Include the Composer SPL autoloadd file in your project:

    require_once('../vendor/autoload.php');


* Call the converter:

    $phpToJavascript = new PHPToJavascript\PHPToJavascript($inputFilename);
    $jsOutput = $phpToJavascript->toJavascript();

$jsOutput will now contain an autogenerated Javascript version of the PHP source file.

TODO
====

* Add more tests, setup some automated tester.

* Figure out what to do about Javascript reserved keywords. Probably out to detect them and either warn or give an error on detection.  testObject.delete();

* Figure out how to set flags for what should be done with echo. e.g. should it be sent to console.log(), alert(), document.write() etc. Think these may need to be flags to be set when PHPToJavascript is run.

* Fix functions that exist in the global (not class) scope being moved to the end of that file, and so potentially being declared after they're being called.

Limitations
===========

There are several features of the PHP language that either are too difficult to map into Javascript, or are just not possible in Javascript. These features will almost certainly never be implemented (at least by myself) so if you're waiting for these to be done, give up early.


Pass by reference
-----------------

This feature does not exist in Javascript and so cannot be supported without a huge amount of effort.

Static class variables are always public
----------------------------------------

Due to the way objects in Javascript are implemented static class variables will always have public scope.


Defines are converted to value, but not defined in Javascript.
-------------------------------------------------------------

The code:

    define('DATABASE_TYPE', 'MySQL');
	echo "Database type is ".DATABASE_TYPE;

is converted to:

    // define('DATABASE_TYPE', 'MySQL');
    document.write( "Database type is " + 'MySQL');

If this is a problem for you - don't use defines. Instead use classes to define your const variables.